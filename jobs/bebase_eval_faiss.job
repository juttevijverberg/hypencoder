#!/bin/bash

#SBATCH --partition=gpu_h100
#SBATCH --gpus=1
#SBATCH --job-name=be_base
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=27
#SBATCH --mem=250G
#SBATCH --time=10:00:00
#SBATCH --output=outputs/be_base_touche_%A.out

module purge
module load 2023
module load Anaconda3/2023.07-2

source activate hype-faiss

export SAVE_ENCODED_DOCS_PATH="$HOME/hypencoder/encoded_items/be_base/touche"
mkdir -p "$SAVE_ENCODED_DOCS_PATH"

python scripts/evaluate_bebase_faiss.py \
	--model_name_or_path="$HOME/hypencoder/models/be_base" \
	--ir_dataset_name="beir/webis-touche2020/v2" \
	--output_dir="$HOME/hypencoder/retrieval_outputs/be_base/touche" \
	--batch_size=64 \
	--top_k=1000 \
	--save_encoded_docs_path="$SAVE_ENCODED_DOCS_PATH"